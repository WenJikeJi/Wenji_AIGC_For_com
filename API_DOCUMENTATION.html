<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>分级用户权限平台 API 文档</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        header {
            background-color: #2c3e50;
            color: white;
            padding: 30px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        h1 {
            margin: 0;
            font-size: 2.5rem;
        }
        h2 {
            color: #2c3e50;
            margin-top: 40px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }
        h3 {
            color: #34495e;
            margin-top: 30px;
        }
        .api-group {
            background-color: white;
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .api-endpoint {
            margin-bottom: 30px;
            padding-left: 20px;
            border-left: 3px solid #3498db;
        }
        .method {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 4px;
            font-weight: bold;
            color: white;
            margin-right: 10px;
        }
        .GET { background-color: #27ae60; }
        .POST { background-color: #3498db; }
        .PUT { background-color: #f39c12; }
        .DELETE { background-color: #e74c3c; }
        .endpoint-url {
            font-family: 'Courier New', Courier, monospace;
            font-size: 1.1rem;
            color: #2c3e50;
        }
        .description {
            margin: 15px 0;
            color: #555;
            padding-left: 50px;
        }
        .parameters, .request-body, .responses {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 4px;
            margin: 15px 0;
        }
        h4 {
            margin-top: 0;
            color: #34495e;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
        }
        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #f2f2f2;
            font-weight: 600;
        }
        .code-block {
            font-family: 'Courier New', Courier, monospace;
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
            margin: 10px 0;
        }
        .note {
            background-color: #fff3cd;
            border-left: 4px solid #ffeaa7;
            padding: 15px;
            border-radius: 4px;
            margin: 15px 0;
        }
        .security {
            background-color: #dfe6e9;
            padding: 15px;
            border-radius: 4px;
            margin: 15px 0;
        }
        .tag {
            display: inline-block;
            background-color: #bdc3c7;
            color: #2c3e50;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-right: 5px;
        }
    </style>
</head>
<body>
    <header>
        <h1>分级用户权限平台 API 文档</h1>
        <p>支持主账号/子账号管理的企业级权限平台，提供用户注册、登录、权限管控、操作审计等功能</p>
        <p>版本: 1.0.0</p>
    </header>

    <div class="api-group">
        <h2 id="authentication">1. 认证接口 (Authentication)</h2>
        
        <div class="api-endpoint">
            <div>
                <span class="method POST">POST</span>
                <span class="endpoint-url">/api/auth/login</span>
                <span class="tag">认证</span>
            </div>
            <div class="description">
                <h3>用户登录</h3>
                <p>用户通过账号和密码进行登录认证，返回JWT令牌用于后续接口访问</p>
            </div>
            <div class="request-body">
                <h4>请求体 (Request Body)</h4>
                <div class="code-block">
{<br>
  "account": "admin",         // 登录账号<br>
  "encryptedPassword": "encrypted_password", // RSA加密后的密码<br>
  "role": 0                    // 角色类型: 0-主账号, 1-子账号
}<br>
                </div>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>登录成功</td>
                        <td>
                            <div class="code-block">
{<br>
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...", // JWT令牌<br>
  "userId": 1,              // 用户ID<br>
  "username": "张三",       // 用户名<br>
  "role": 0                 // 角色类型
}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>400</td>
                        <td>账号或密码错误</td>
                        <td>
                            <div class="code-block">
{"error": "账号或密码错误", "code": 400}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="api-endpoint">
            <div>
                <span class="method POST">POST</span>
                <span class="endpoint-url">/api/auth/register</span>
                <span class="tag">认证</span>
            </div>
            <div class="description">
                <h3>用户注册</h3>
                <p>用户注册新账号，需要先获取验证码进行验证</p>
            </div>
            <div class="request-body">
                <h4>请求体 (Request Body)</h4>
                <div class="code-block">
{<br>
  "username": "张三",                     // 用户名<br>
  "account": "zhangsan",                 // 登录账号<br>
  "email": "zhangsan@example.com",       // 邮箱地址<br>
  "encryptedPassword": "encrypted_password", // RSA加密后的密码<br>
  "encryptedConfirmPassword": "encrypted_confirm_password", // RSA加密后的确认密码<br>
  "agreeTerms": true,                     // 是否同意服务条款<br>
  "code": "123456"                       // 验证码
}<br>
                </div>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>注册成功</td>
                        <td>
                            <div class="code-block">
{"message": "注册成功"}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>400</td>
                        <td>注册失败，可能是账号已存在、邮箱已存在或验证码错误</td>
                        <td>
                            <div class="code-block">
{"error": "注册失败原因"}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="api-endpoint">
            <div>
                <span class="method POST">POST</span>
                <span class="endpoint-url">/api/auth/forgot-password</span>
                <span class="tag">认证</span>
            </div>
            <div class="description">
                <h3>忘记密码</h3>
                <p>用户忘记密码时，通过注册邮箱获取密码重置验证码</p>
            </div>
            <div class="request-body">
                <h4>请求体 (Request Body)</h4>
                <div class="code-block">
{<br>
  "email": "user@example.com"  // 注册邮箱
}<br>
                </div>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>验证码已发送</td>
                        <td>
                            <div class="code-block">
{"message": "验证码已发送"}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>400</td>
                        <td>该邮箱未注册或其他错误</td>
                        <td>
                            <div class="code-block">
{"error": "错误信息"}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="api-endpoint">
            <div>
                <span class="method POST">POST</span>
                <span class="endpoint-url">/api/auth/send-verification-code</span>
                <span class="tag">验证码</span>
            </div>
            <div class="description">
                <h3>发送验证码</h3>
                <p>发送验证码到用户邮箱，支持注册验证和密码重置两种类型</p>
            </div>
            <div class="request-body">
                <h4>请求体 (Request Body)</h4>
                <div class="code-block">
{<br>
  "email": "user@example.com",  // 邮箱地址<br>
  "type": 1                      // 验证码类型: 1-注册验证, 2-密码重置
}<br>
                </div>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>验证码已发送</td>
                        <td>
                            <div class="code-block">
{<br>
  "message": "验证码已生成，我们会尽力发送到您的邮箱",<br>
  "status": "success",<br>
  "type": 1,<br>
  "email": "user@example.com",<br>
  "alternativeMethod": "如果未收到邮件，您可以通过系统管理工具从数据库获取验证码"
}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>500</td>
                        <td>服务器内部错误</td>
                        <td>
                            <div class="code-block">
{<br>
  "error": "错误信息",<br>
  "status": "failed",<br>
  "email": "user@example.com",<br>
  "timestamp": 1684567890000,<br>
  "supportInfo": "请检查您的邮箱是否正确，或联系系统管理员获取帮助"
}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="api-endpoint">
            <div>
                <span class="method POST">POST</span>
                <span class="endpoint-url">/api/auth/register/send-code</span>
                <span class="tag">认证</span>
            </div>
            <div class="description">
                <h3>注册发送验证码</h3>
                <p>为用户注册发送验证码到邮箱</p>
            </div>
            <div class="request-body">
                <h4>请求体 (Request Body)</h4>
                <div class="code-block">
{<br>
  "email": "user@example.com"  // 邮箱地址
}<br>
                </div>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>验证码已发送</td>
                        <td>
                            <div class="code-block">
{<br>
  "message": "验证码已生成，我们会尽力发送到您的邮箱",<br>
  "status": "success",<br>
  "type": 1,<br>
  "email": "user@example.com",<br>
  "alternativeMethod": "如果未收到邮件，您可以通过系统管理工具从数据库获取验证码"
}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>500</td>
                        <td>服务器内部错误</td>
                        <td>
                            <div class="code-block">
{<br>
  "error": "错误信息",<br>
  "status": "failed",<br>
  "email": "user@example.com",<br>
  "timestamp": 1684567890000,<br>
  "supportInfo": "请检查您的邮箱是否正确，或联系系统管理员获取帮助"
}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="api-endpoint">
            <div>
                <span class="method POST">POST</span>
                <span class="endpoint-url">/api/auth/reset-password</span>
                <span class="tag">认证</span>
            </div>
            <div class="description">
                <h3>重置密码</h3>
                <p>使用验证码重置用户密码</p>
            </div>
            <div class="request-body">
                <h4>请求体 (Request Body)</h4>
                <div class="code-block">
{<br>
  "email": "user@example.com",          // 邮箱地址<br>
  "code": "123456",                     // 验证码<br>
  "encryptedPassword": "encrypted_new_password", // RSA加密后的新密码<br>
  "newPassword": "plain_new_password"    // 明文新密码（备用方案）
}<br>
                </div>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>密码重置成功</td>
                        <td>
                            <div class="code-block">
{"message": "密码重置成功"}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>400</td>
                        <td>验证码错误或其他参数错误</td>
                        <td>
                            <div class="code-block">
{"error": "错误信息"}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="api-endpoint">
            <div>
                <span class="method POST">POST</span>
                <span class="endpoint-url">/api/auth/change-password</span>
                <span class="tag">认证</span>
            </div>
            <div class="description">
                <h3>修改密码（已登录状态）</h3>
                <p>当前登录用户修改自己的密码</p>
            </div>
            <div class="security">
                <h4>安全要求</h4>
                <p>需要携带有效的JWT令牌</p>
            </div>
            <div class="request-body">
                <h4>请求体 (Request Body)</h4>
                <div class="code-block">
{<br>
  "encryptedOldPassword": "old_encrypted_pwd", // RSA加密后的旧密码<br>
  "encryptedNewPassword": "new_encrypted_pwd"  // RSA加密后的新密码
}<br>
                </div>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>密码修改成功</td>
                        <td>
                            <div class="code-block">
{"message": "密码修改成功"}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>400</td>
                        <td>参数错误或密码不匹配</td>
                        <td>
                            <div class="code-block">
{"error": "错误信息"}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <div class="api-group">
        <h2 id="user-management">2. 用户管理接口 (User Management)</h2>
        
        <div class="api-endpoint">
            <div>
                <span class="method GET">GET</span>
                <span class="endpoint-url">/api/users</span>
                <span class="tag">用户管理</span>
            </div>
            <div class="description">
                <h3>获取用户列表</h3>
                <p>主账号可以查看所有用户列表，子账号无权限查看</p>
            </div>
            <div class="security">
                <h4>安全要求</h4>
                <p>需要携带有效的JWT令牌</p>
            </div>
            <div class="parameters">
                <h4>请求参数 (Query Parameters)</h4>
                <table>
                    <tr>
                        <th>参数名</th>
                        <th>类型</th>
                        <th>是否必填</th>
                        <th>描述</th>
                        <th>默认值</th>
                    </tr>
                    <tr>
                        <td>page</td>
                        <td>Integer</td>
                        <td>否</td>
                        <td>页码</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td>size</td>
                        <td>Integer</td>
                        <td>否</td>
                        <td>每页条数</td>
                        <td>10</td>
                    </tr>
                    <tr>
                        <td>parentId</td>
                        <td>Long</td>
                        <td>否</td>
                        <td>父账号ID，用于筛选特定主账号下的子账号</td>
                        <td>无</td>
                    </tr>
                </table>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>查询成功</td>
                        <td>
                            <div class="code-block">
{<br>
  "total": 2,                // 总记录数<br>
  "page": 1,                 // 当前页码<br>
  "size": 10,                // 每页条数<br>
  "users": [                 // 用户列表<br>
    {<br>
      "id": 1,               // 用户ID<br>
      "username": "张三",   // 用户名<br>
      "account": "zhangsan", // 登录账号<br>
      "role": 0,             // 角色类型: 0-主账号, 1-子账号<br>
      "status": 1            // 状态: 0-禁用, 1-启用<br>
    },<br>
    {<br>
      "id": 2,<br>
      "username": "李四",<br>
      "account": "lisi",<br>
      "role": 1,<br>
      "status": 1<br>
    }<br>
  ]<br>
}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>400</td>
                        <td>请求参数错误</td>
                        <td>
                            <div class="code-block">
{"error": "错误信息"}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>401</td>
                        <td>未授权，需要登录</td>
                        <td>
                            <div class="code-block">
{"error": "未授权访问"}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>403</td>
                        <td>权限不足</td>
                        <td>
                            <div class="code-block">
{"error": "权限不足"}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="api-endpoint">
            <div>
                <span class="method POST">POST</span>
                <span class="endpoint-url">/api/users/subaccount</span>
                <span class="tag">用户管理</span>
            </div>
            <div class="description">
                <h3>添加子账号</h3>
                <p>主账号添加子账号，每个子账号与主账号关联</p>
            </div>
            <div class="security">
                <h4>安全要求</h4>
                <p>需要携带有效的JWT令牌，且只能由主账号操作</p>
            </div>
            <div class="request-body">
                <h4>请求体 (Request Body)</h4>
                <div class="code-block">
{<br>
  "username": "子账号名称",         // 子账号用户名<br>
  "account": "subaccount001",      // 子账号登录账号<br>
  "email": "subaccount@example.com", // 子账号邮箱<br>
  "password": "password123",       // 子账号密码（明文）<br>
  "role": 3                         // 子账号角色: 3-编辑角色（默认）
}<br>
                </div>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>子账号添加成功</td>
                        <td>
                            <div class="code-block">
{"message": "子账号添加成功"}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>400</td>
                        <td>请求参数错误或子账号添加失败</td>
                        <td>
                            <div class="code-block">
{"error": "错误信息"}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>401</td>
                        <td>未授权，需要登录</td>
                        <td>
                            <div class="code-block">
{"error": "未授权访问"}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>403</td>
                        <td>只有主账号才能添加子账号</td>
                        <td>
                            <div class="code-block">
{"error": "只有主账号才能添加子账号"}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="note">
                <strong>注意：</strong>当前实现中，子账号密码以明文方式传输，存在安全隐患。建议修改为使用RSA加密传输。
            </div>
        </div>

        <div class="api-endpoint">
            <div>
                <span class="method DELETE">DELETE</span>
                <span class="endpoint-url">/api/users/subaccount/{subAccountId}</span>
                <span class="tag">用户管理</span>
            </div>
            <div class="description">
                <h3>解除子账号关联</h3>
                <p>主账号解除与子账号的关联关系</p>
            </div>
            <div class="security">
                <h4>安全要求</h4>
                <p>需要携带有效的JWT令牌，且只能由主账号操作</p>
            </div>
            <div class="parameters">
                <h4>请求参数 (Path Parameters)</h4>
                <table>
                    <tr>
                        <th>参数名</th>
                        <th>类型</th>
                        <th>是否必填</th>
                        <th>描述</th>
                    </tr>
                    <tr>
                        <td>subAccountId</td>
                        <td>Long</td>
                        <td>是</td>
                        <td>子账号ID</td>
                    </tr>
                </table>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>子账号解除关联成功</td>
                        <td>
                            <div class="code-block">
{"message": "子账号解除关联成功"}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>400</td>
                        <td>解除关联失败</td>
                        <td>
                            <div class="code-block">
{"error": "错误信息"}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>401</td>
                        <td>未授权，需要登录</td>
                        <td>
                            <div class="code-block">
{"error": "未授权访问"}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>403</td>
                        <td>只有主账号才能解除子账号关联</td>
                        <td>
                            <div class="code-block">
{"error": "只有主账号才能解除子账号关联"}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>404</td>
                        <td>子账号不存在</td>
                        <td>
                            <div class="code-block">
{"error": "子账号不存在"}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="api-endpoint">
            <div>
                <span class="method GET">GET</span>
                <span class="endpoint-url">/api/users/{userId}</span>
                <span class="tag">用户管理</span>
            </div>
            <div class="description">
                <h3>获取用户详情</h3>
                <p>获取用户的详细信息，主账号可以查看任何用户，子账号只能查看自己</p>
            </div>
            <div class="security">
                <h4>安全要求</h4>
                <p>需要携带有效的JWT令牌</p>
            </div>
            <div class="parameters">
                <h4>请求参数 (Path Parameters)</h4>
                <table>
                    <tr>
                        <th>参数名</th>
                        <th>类型</th>
                        <th>是否必填</th>
                        <th>描述</th>
                    </tr>
                    <tr>
                        <td>userId</td>
                        <td>Long</td>
                        <td>是</td>
                        <td>用户ID</td>
                    </tr>
                </table>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>查询成功</td>
                        <td>
                            <div class="code-block">
{<br>
  "id": 1,                     // 用户ID<br>
  "username": "张三",         // 用户名<br>
  "account": "zhangsan",      // 登录账号<br>
  "email": "zhangsan@example.com", // 邮箱地址<br>
  "role": 0,                   // 角色类型<br>
  "status": 1,                 // 状态<br>
  "parentId": null,            // 父账号ID（子账号才有）<br>
  "createdTime": "2023-01-01T10:00:00", // 创建时间<br>
  "lastLoginTime": "2023-01-10T15:30:00" // 最后登录时间<br>
}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>400</td>
                        <td>查询失败</td>
                        <td>
                            <div class="code-block">
{"error": "错误信息"}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>401</td>
                        <td>未授权，需要登录</td>
                        <td>
                            <div class="code-block">
{"error": "未授权访问"}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>403</td>
                        <td>无权限查看该用户信息</td>
                        <td>
                            <div class="code-block">
{"error": "无权限查看该用户信息"}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>404</td>
                        <td>用户不存在</td>
                        <td>
                            <div class="code-block">
{"error": "用户不存在"}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="api-endpoint">
            <div>
                <span class="method PUT">PUT</span>
                <span class="endpoint-url">/api/users/{userId}/status</span>
                <span class="tag">用户管理</span>
            </div>
            <div class="description">
                <h3>更新用户状态</h3>
                <p>更新用户的状态（启用/禁用）</p>
            </div>
            <div class="security">
                <h4>安全要求</h4>
                <p>需要携带有效的JWT令牌</p>
            </div>
            <div class="parameters">
                <h4>请求参数 (Path Parameters)</h4>
                <table>
                    <tr>
                        <th>参数名</th>
                        <th>类型</th>
                        <th>是否必填</th>
                        <th>描述</th>
                    </tr>
                    <tr>
                        <td>userId</td>
                        <td>Long</td>
                        <td>是</td>
                        <td>用户ID</td>
                    </tr>
                </table>
            </div>
            <div class="request-body">
                <h4>请求体 (Request Body)</h4>
                <div class="code-block">
{<br>
  "status": 1  // 状态值: 0-禁用, 1-启用
}<br>
                </div>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>用户状态更新成功</td>
                        <td>
                            <div class="code-block">
{"message": "用户状态更新成功"}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>400</td>
                        <td>更新失败或状态值无效</td>
                        <td>
                            <div class="code-block">
{"error": "错误信息"}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>401</td>
                        <td>未授权，需要登录</td>
                        <td>
                            <div class="code-block">
{"error": "未授权访问"}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>404</td>
                        <td>用户不存在</td>
                        <td>
                            <div class="code-block">
{"error": "用户不存在"}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="api-endpoint">
            <div>
                <span class="method POST">POST</span>
                <span class="endpoint-url">/api/users/password</span>
                <span class="tag">用户管理</span>
            </div>
            <div class="description">
                <h3>修改用户密码</h3>
                <p>当前登录用户修改自己的密码，需要验证旧密码的正确性，新密码需要符合系统安全要求</p>
            </div>
            <div class="security">
                <h4>安全要求</h4>
                <p>需要携带有效的JWT令牌</p>
            </div>
            <div class="request-body">
                <h4>请求体 (Request Body)</h4>
                <div class="code-block">
{<br>
  "encryptedOldPassword": "old_encrypted_pwd", // RSA加密后的旧密码<br>
  "encryptedNewPassword": "new_encrypted_pwd"  // RSA加密后的新密码
}<br>
                </div>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>密码修改成功</td>
                        <td>
                            <div class="code-block">
{"message": "密码修改成功"}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>400</td>
                        <td>参数错误或密码不匹配</td>
                        <td>
                            <div class="code-block">
{"error": "旧密码错误"}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>401</td>
                        <td>未授权，需要登录</td>
                        <td>
                            <div class="code-block">
{"error": "未授权访问"}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>403</td>
                        <td>权限不足</td>
                        <td>
                            <div class="code-block">
{"error": "权限不足"}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <div class="api-group">
        <h2 id="log-management">3. 日志管理接口 (Log Management)</h2>
        
        <div class="api-endpoint">
            <div>
                <span class="method GET">GET</span>
                <span class="endpoint-url">/api/logs</span>
                <span class="tag">日志管理</span>
            </div>
            <div class="description">
                <h3>获取操作日志列表</h3>
                <p>获取用户的操作日志列表，支持分页和多种条件筛选</p>
            </div>
            <div class="security">
                <h4>安全要求</h4>
                <p>需要携带有效的JWT令牌</p>
            </div>
            <div class="parameters">
                <h4>请求参数 (Query Parameters)</h4>
                <table>
                    <tr>
                        <th>参数名</th>
                        <th>类型</th>
                        <th>是否必填</th>
                        <th>描述</th>
                        <th>默认值</th>
                    </tr>
                    <tr>
                        <td>page</td>
                        <td>Integer</td>
                        <td>否</td>
                        <td>页码</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td>size</td>
                        <td>Integer</td>
                        <td>否</td>
                        <td>每页条数</td>
                        <td>10</td>
                    </tr>
                    <tr>
                        <td>userId</td>
                        <td>Long</td>
                        <td>否</td>
                        <td>用户ID，用于筛选特定用户的日志</td>
                        <td>无</td>
                    </tr>
                    <tr>
                        <td>operation</td>
                        <td>String</td>
                        <td>否</td>
                        <td>操作类型，用于筛选特定操作类型的日志</td>
                        <td>无</td>
                    </tr>
                    <tr>
                        <td>startTime</td>
                        <td>LocalDateTime</td>
                        <td>否</td>
                        <td>开始时间，格式：YYYY-MM-DDTHH:mm:ss</td>
                        <td>无</td>
                    </tr>
                    <tr>
                        <td>endTime</td>
                        <td>LocalDateTime</td>
                        <td>否</td>
                        <td>结束时间，格式：YYYY-MM-DDTHH:mm:ss</td>
                        <td>无</td>
                    </tr>
                </table>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>查询成功</td>
                        <td>
                            <div class="code-block">
{<br>
  "total": 100,               // 总记录数<br>
  "page": 1,                  // 当前页码<br>
  "size": 10,                 // 每页条数<br>
  "data": [                   // 日志列表<br>
    {<br>
      "id": 1,                // 日志ID<br>
      "userId": 1,            // 用户ID<br>
      "username": "张三",    // 用户名<br>
      "operation": "登录",    // 操作类型<br>
      "ip": "192.168.1.1",    // IP地址<br>
      "address": "北京市",    // 地址<br>
      "result": "success",    // 操作结果<br>
      "createTime": "2023-01-10T15:30:00" // 操作时间<br>
    }<br>
  ]<br>
}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>400</td>
                        <td>请求参数错误</td>
                        <td>
                            <div class="code-block">
{"error": "错误信息"}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>401</td>
                        <td>未授权，需要登录</td>
                        <td>
                            <div class="code-block">
{"error": "未授权访问"}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="api-endpoint">
            <div>
                <span class="method GET">GET</span>
                <span class="endpoint-url">/api/logs/by-operation</span>
                <span class="tag">日志管理</span>
            </div>
            <div class="description">
                <h3>根据操作类型获取日志</h3>
                <p>根据操作类型获取用户的操作日志列表，支持分页</p>
            </div>
            <div class="security">
                <h4>安全要求</h4>
                <p>需要携带有效的JWT令牌</p>
            </div>
            <div class="parameters">
                <h4>请求参数 (Query Parameters)</h4>
                <table>
                    <tr>
                        <th>参数名</th>
                        <th>类型</th>
                        <th>是否必填</th>
                        <th>描述</th>
                        <th>默认值</th>
                    </tr>
                    <tr>
                        <td>operationType</td>
                        <td>String</td>
                        <td>是</td>
                        <td>操作类型</td>
                        <td>无</td>
                    </tr>
                    <tr>
                        <td>page</td>
                        <td>Integer</td>
                        <td>否</td>
                        <td>页码</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td>size</td>
                        <td>Integer</td>
                        <td>否</td>
                        <td>每页条数</td>
                        <td>10</td>
                    </tr>
                </table>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>查询成功</td>
                        <td>
                            <div class="code-block">
{<br>
  "total": 50,                // 总记录数<br>
  "page": 1,                  // 当前页码<br>
  "size": 10,                 // 每页条数<br>
  "data": [                   // 日志列表<br>
    {<br>
      "id": 1,                // 日志ID<br>
      "userId": 1,            // 用户ID<br>
      "username": "张三",    // 用户名<br>
      "operation": "登录",    // 操作类型<br>
      "ip": "192.168.1.1",    // IP地址<br>
      "address": "北京市",    // 地址<br>
      "result": "success",    // 操作结果<br>
      "createTime": "2023-01-10T15:30:00" // 操作时间<br>
    }<br>
  ]<br>
}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>400</td>
                        <td>请求参数错误</td>
                        <td>
                            <div class="code-block">
{"error": "错误信息"}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>401</td>
                        <td>未授权，需要登录</td>
                        <td>
                            <div class="code-block">
{"error": "未授权访问"}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="api-endpoint">
            <div>
                <span class="method GET">GET</span>
                <span class="endpoint-url">/api/logs/login</span>
                <span class="tag">日志管理</span>
            </div>
            <div class="description">
                <h3>获取登录日志</h3>
                <p>获取用户的登录日志列表，支持分页</p>
            </div>
            <div class="security">
                <h4>安全要求</h4>
                <p>需要携带有效的JWT令牌</p>
            </div>
            <div class="parameters">
                <h4>请求参数 (Query Parameters)</h4>
                <table>
                    <tr>
                        <th>参数名</th>
                        <th>类型</th>
                        <th>是否必填</th>
                        <th>描述</th>
                        <th>默认值</th>
                    </tr>
                    <tr>
                        <td>page</td>
                        <td>Integer</td>
                        <td>否</td>
                        <td>页码</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td>size</td>
                        <td>Integer</td>
                        <td>否</td>
                        <td>每页条数</td>
                        <td>10</td>
                    </tr>
                </table>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>查询成功</td>
                        <td>
                            <div class="code-block">
{<br>
  "total": 30,                // 总记录数<br>
  "page": 1,                  // 当前页码<br>
  "size": 10,                 // 每页条数<br>
  "data": [                   // 日志列表<br>
    {<br>
      "id": 1,                // 日志ID<br>
      "userId": 1,            // 用户ID<br>
      "username": "张三",    // 用户名<br>
      "operation": "登录",    // 操作类型<br>
      "ip": "192.168.1.1",    // IP地址<br>
      "address": "北京市",    // 地址<br>
      "result": "success",    // 操作结果<br>
      "createTime": "2023-01-10T15:30:00" // 操作时间<br>
    }<br>
  ]<br>
}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>400</td>
                        <td>请求参数错误</td>
                        <td>
                            <div class="code-block">
{"error": "错误信息"}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>401</td>
                        <td>未授权，需要登录</td>
                        <td>
                            <div class="code-block">
{"error": "未授权访问"}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <div class="api-group">
        <h2 id="verification-code">4. 验证码接口 (Verification Code)</h2>
        
        <div class="api-endpoint">
            <div>
                <span class="method POST">POST</span>
                <span class="endpoint-url">/api/verify-code/generate</span>
                <span class="tag">验证码</span>
            </div>
            <div class="description">
                <h3>生成验证码</h3>
                <p>生成并发送验证码到用户邮箱，支持注册验证和密码重置两种类型</p>
            </div>
            <div class="request-body">
                <h4>请求体 (Request Body)</h4>
                <div class="code-block">
{<br>
  "email": "user@example.com",  // 邮箱地址<br>
  "type": 1                      // 验证码类型: 1-注册验证, 2-密码重置<br>
}<br>
                </div>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>验证码已生成</td>
                        <td>
                            <div class="code-block">
{<br>
  "message": "验证码已生成，我们会尽力发送到您的邮箱",<br>
  "status": "success",<br>
  "type": 1,<br>
  "email": "user@example.com",<br>
  "alternativeMethod": "如果未收到邮件，您可以通过系统管理工具从数据库获取验证码"
}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>500</td>
                        <td>服务器内部错误</td>
                        <td>
                            <div class="code-block">
{<br>
  "error": "错误信息",<br>
  "status": "failed",<br>
  "email": "user@example.com",<br>
  "timestamp": 1684567890000,<br>
  "supportInfo": "请检查您的邮箱是否正确，或联系系统管理员获取帮助"
}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="api-endpoint">
            <div>
                <span class="method POST">POST</span>
                <span class="endpoint-url">/api/verify-code/validate</span>
                <span class="tag">验证码</span>
            </div>
            <div class="description">
                <h3>验证验证码</h3>
                <p>验证用户输入的验证码是否正确</p>
            </div>
            <div class="request-body">
                <h4>请求体 (Request Body)</h4>
                <div class="code-block">
{<br>
  "email": "user@example.com",  // 邮箱地址<br>
  "code": "123456",             // 验证码<br>
  "type": 1                      // 验证码类型: 1-注册验证, 2-密码重置<br>
}<br>
                </div>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>验证码验证结果</td>
                        <td>
                            <div class="code-block">
{"valid": true, "message": "验证码验证成功"}<br>
                            </div>
                            或<br>
                            <div class="code-block">
{"valid": false, "message": "验证码错误或已过期"}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <div class="api-group">
        <h2 id="social-media">5. 社媒管理 (Social Media Management)</h2>
        
        <div class="api-endpoint">
            <div>
                <span class="method POST">POST</span>
                <span class="endpoint-url">/api/social/post/instant</span>
                <span class="tag">社交媒体</span>
            </div>
            <div class="description">
                <h3>即时发帖</h3>
                <p>立即发布内容到指定的社交媒体平台</p>
            </div>
            <div class="request-body">
                <h4>请求体 (Request Body)</h4>
                <div class="code-block">
{<br>
  "platform": "facebook",        // 平台类型: facebook, instagram<br>
  "content": "发帖内容",          // 发帖文本内容<br>
  "imageUrl": "http://example.com/image.jpg",  // 可选，图片URL<br>
  "accessToken": "your_access_token"  // 平台访问令牌<br>
}<br>
                </div>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>发帖成功</td>
                        <td>
                            <div class="code-block">
{<br>
  "success": true,<br>
  "message": "发帖成功",<br>
  "postId": "123456789",<br>
  "platform": "facebook"<br>
}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>400</td>
                        <td>请求参数错误</td>
                        <td>
                            <div class="code-block">
{<br>
  "success": false,<br>
  "message": "参数错误: 内容不能为空"<br>
}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="api-endpoint">
            <div>
                <span class="method POST">POST</span>
                <span class="endpoint-url">/api/social/post/schedule</span>
                <span class="tag">社交媒体</span>
            </div>
            <div class="description">
                <h3>定时发帖</h3>
                <p>创建定时发帖任务，在指定时间发布内容</p>
            </div>
            <div class="request-body">
                <h4>请求体 (Request Body)</h4>
                <div class="code-block">
{<br>
  "platform": "instagram",       // 平台类型: facebook, instagram<br>
  "content": "定时发帖内容",      // 发帖文本内容<br>
  "imageUrl": "http://example.com/image.jpg",  // 可选，图片URL<br>
  "accessToken": "your_access_token",  // 平台访问令牌<br>
  "scheduledTime": "2024-01-15T10:30:00"  // 定时发布时间 (ISO 8601格式)<br>
}<br>
                </div>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>定时任务创建成功</td>
                        <td>
                            <div class="code-block">
{<br>
  "success": true,<br>
  "message": "定时任务创建成功",<br>
  "taskId": "task_123456",<br>
  "scheduledTime": "2024-01-15T10:30:00"<br>
}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="api-endpoint">
            <div>
                <span class="method GET">GET</span>
                <span class="endpoint-url">/api/social/tasks</span>
                <span class="tag">社交媒体</span>
            </div>
            <div class="description">
                <h3>获取任务列表</h3>
                <p>获取所有定时发帖任务的列表</p>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>获取成功</td>
                        <td>
                            <div class="code-block">
{<br>
  "success": true,<br>
  "tasks": [<br>
    {<br>
      "id": "task_123456",<br>
      "platform": "facebook",<br>
      "content": "定时发帖内容",<br>
      "scheduledTime": "2024-01-15T10:30:00",<br>
      "status": "pending",<br>
      "createdAt": "2024-01-14T15:20:00"<br>
    }<br>
  ]<br>
}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="api-endpoint">
            <div>
                <span class="method DELETE">DELETE</span>
                <span class="endpoint-url">/api/social/tasks/{taskId}</span>
                <span class="tag">社交媒体</span>
            </div>
            <div class="description">
                <h3>删除定时任务</h3>
                <p>删除指定的定时发帖任务</p>
            </div>
            <div class="path-params">
                <h4>路径参数 (Path Parameters)</h4>
                <table>
                    <tr>
                        <th>参数名</th>
                        <th>类型</th>
                        <th>描述</th>
                    </tr>
                    <tr>
                        <td>taskId</td>
                        <td>String</td>
                        <td>任务ID</td>
                    </tr>
                </table>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>删除成功</td>
                        <td>
                            <div class="code-block">
{<br>
  "success": true,<br>
  "message": "任务删除成功"<br>
}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>404</td>
                        <td>任务不存在</td>
                        <td>
                            <div class="code-block">
{<br>
  "success": false,<br>
  "message": "任务不存在"<br>
}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Facebook 专用接口 -->
        <h3 id="facebook-apis">Facebook 专用接口</h3>
        
        <div class="api-endpoint">
            <div>
                <span class="method GET">GET</span>
                <span class="endpoint-url">/api/social/facebook/auth-url</span>
                <span class="tag">Facebook</span>
            </div>
            <div class="description">
                <h3>获取Facebook授权URL</h3>
                <p>获取Facebook OAuth授权链接，用户需要访问此链接进行授权</p>
            </div>
            <div class="security">
                <h4>安全要求</h4>
                <p>需要携带有效的JWT令牌</p>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>获取成功</td>
                        <td>
                            <div class="code-block">
{<br>
  "authUrl": "https://www.facebook.com/v23.0/dialog/oauth?client_id=YOUR_APP_ID&redirect_uri=YOUR_REDIRECT_URI&scope=pages_manage_posts,pages_read_engagement,pages_show_list&response_type=code"<br>
}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="api-endpoint">
            <div>
                <span class="method POST">POST</span>
                <span class="endpoint-url">/api/social/facebook/save-token</span>
                <span class="tag">Facebook</span>
            </div>
            <div class="description">
                <h3>保存Facebook访问令牌</h3>
                <p>保存用户的Facebook访问令牌，用于后续API调用</p>
            </div>
            <div class="security">
                <h4>安全要求</h4>
                <p>需要携带有效的JWT令牌</p>
            </div>
            <div class="request-body">
                <h4>请求体 (Request Body)</h4>
                <div class="code-block">
{<br>
  "accessToken": "facebook_access_token"  // Facebook访问令牌<br>
}<br>
                </div>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>保存成功</td>
                        <td>
                            <div class="code-block">
{<br>
  "message": "Facebook访问令牌保存成功"<br>
}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>400</td>
                        <td>令牌无效</td>
                        <td>
                            <div class="code-block">
{<br>
  "error": "无效的访问令牌"<br>
}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="api-endpoint">
            <div>
                <span class="method DELETE">DELETE</span>
                <span class="endpoint-url">/api/social/facebook/unbind</span>
                <span class="tag">Facebook</span>
            </div>
            <div class="description">
                <h3>解绑Facebook账号</h3>
                <p>解除当前用户与Facebook账号的绑定关系</p>
            </div>
            <div class="security">
                <h4>安全要求</h4>
                <p>需要携带有效的JWT令牌</p>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>解绑成功</td>
                        <td>
                            <div class="code-block">
{<br>
  "message": "Facebook账号解绑成功"<br>
}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="api-endpoint">
            <div>
                <span class="method GET">GET</span>
                <span class="endpoint-url">/api/social/facebook/posts</span>
                <span class="tag">Facebook</span>
            </div>
            <div class="description">
                <h3>获取Facebook帖子列表</h3>
                <p>获取用户Facebook页面的帖子列表</p>
            </div>
            <div class="security">
                <h4>安全要求</h4>
                <p>需要携带有效的JWT令牌</p>
            </div>
            <div class="parameters">
                <h4>请求参数 (Query Parameters)</h4>
                <table>
                    <tr>
                        <th>参数名</th>
                        <th>类型</th>
                        <th>是否必填</th>
                        <th>描述</th>
                        <th>默认值</th>
                    </tr>
                    <tr>
                        <td>page</td>
                        <td>Integer</td>
                        <td>否</td>
                        <td>页码</td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td>size</td>
                        <td>Integer</td>
                        <td>否</td>
                        <td>每页条数</td>
                        <td>10</td>
                    </tr>
                </table>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>获取成功</td>
                        <td>
                            <div class="code-block">
{<br>
  "content": [<br>
    {<br>
      "postId": "123456789",<br>
      "content": "帖子内容",<br>
      "publishTime": "2024-01-15T10:30:00",<br>
      "platform": "Facebook"<br>
    }<br>
  ],<br>
  "totalElements": 50,<br>
  "totalPages": 5,<br>
  "number": 0,<br>
  "size": 10<br>
}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Instagram 专用接口 -->
        <h3 id="instagram-apis">Instagram 专用接口</h3>
        
        <div class="api-endpoint">
            <div>
                <span class="method GET">GET</span>
                <span class="endpoint-url">/api/social/instagram/pages</span>
                <span class="tag">Instagram</span>
            </div>
            <div class="description">
                <h3>获取Instagram Business Pages</h3>
                <p>获取用户关联的Instagram Business账号列表</p>
            </div>
            <div class="security">
                <h4>安全要求</h4>
                <p>需要携带有效的JWT令牌</p>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>获取成功</td>
                        <td>
                            <div class="code-block">
{<br>
  "pages": [<br>
    {<br>
      "id": "instagram_page_id",<br>
      "name": "Instagram Business Account",<br>
      "username": "@business_account",<br>
      "profilePictureUrl": "https://example.com/profile.jpg"<br>
    }<br>
  ]<br>
}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="api-endpoint">
            <div>
                <span class="method POST">POST</span>
                <span class="endpoint-url">/api/social/instagram/select-page</span>
                <span class="tag">Instagram</span>
            </div>
            <div class="description">
                <h3>选择Instagram Page</h3>
                <p>选择要使用的Instagram Business页面</p>
            </div>
            <div class="security">
                <h4>安全要求</h4>
                <p>需要携带有效的JWT令牌</p>
            </div>
            <div class="request-body">
                <h4>请求体 (Request Body)</h4>
                <div class="code-block">
{<br>
  "pageId": "instagram_page_id"  // Instagram页面ID<br>
}<br>
                </div>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>选择成功</td>
                        <td>
                            <div class="code-block">
{<br>
  "message": "Instagram页面选择成功"<br>
}<br>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>400</td>
                        <td>页面ID无效</td>
                        <td>
                            <div class="code-block">
{<br>
  "error": "无效的页面ID"<br>
}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="api-endpoint">
            <div>
                <span class="method DELETE">DELETE</span>
                <span class="endpoint-url">/api/social/instagram/unbind</span>
                <span class="tag">Instagram</span>
            </div>
            <div class="description">
                <h3>解绑Instagram账号</h3>
                <p>解除当前用户与Instagram账号的绑定关系</p>
            </div>
            <div class="security">
                <h4>安全要求</h4>
                <p>需要携带有效的JWT令牌</p>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>解绑成功</td>
                        <td>
                            <div class="code-block">
{<br>
  "message": "Instagram账号解绑成功"<br>
}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="api-endpoint">
            <div>
                <span class="method GET">GET</span>
                <span class="endpoint-url">/api/social/instagram/posts</span>
                <span class="tag">Instagram</span>
            </div>
            <div class="description">
                <h3>获取Instagram帖子列表</h3>
                <p>获取用户Instagram页面的帖子列表</p>
            </div>
            <div class="security">
                <h4>安全要求</h4>
                <p>需要携带有效的JWT令牌</p>
            </div>
            <div class="parameters">
                <h4>请求参数 (Query Parameters)</h4>
                <table>
                    <tr>
                        <th>参数名</th>
                        <th>类型</th>
                        <th>是否必填</th>
                        <th>描述</th>
                        <th>默认值</th>
                    </tr>
                    <tr>
                        <td>page</td>
                        <td>Integer</td>
                        <td>否</td>
                        <td>页码</td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td>size</td>
                        <td>Integer</td>
                        <td>否</td>
                        <td>每页条数</td>
                        <td>10</td>
                    </tr>
                </table>
            </div>
            <div class="responses">
                <h4>响应 (Responses)</h4>
                <table>
                    <tr>
                        <th>状态码</th>
                        <th>描述</th>
                        <th>响应示例</th>
                    </tr>
                    <tr>
                        <td>200</td>
                        <td>获取成功</td>
                        <td>
                            <div class="code-block">
{<br>
  "content": [<br>
    {<br>
      "postId": "instagram_post_id",<br>
      "content": "帖子内容",<br>
      "publishTime": "2024-01-15T10:30:00",<br>
      "platform": "Instagram",<br>
      "mediaUrl": "https://example.com/image.jpg"<br>
    }<br>
  ],<br>
  "totalElements": 30,<br>
  "totalPages": 3,<br>
  "number": 0,<br>
  "size": 10<br>
}<br>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <div class="api-group">
        <h2 id="security">6. 安全说明 (Security)</h2>
        
        <div class="note">
            <h3>认证机制</h3>
            <p>本系统采用JWT (JSON Web Token) 作为认证机制。登录成功后，服务器会返回一个JWT令牌，客户端需要在后续的请求中通过HTTP头Authorization字段携带该令牌（格式：Bearer {token}）。</p>
        </div>
        
        <div class="note">
            <h3>权限控制</h3>
            <p>系统实现了基于角色的访问控制 (RBAC)，主要包括：</p>
            <ul>
                <li><strong>主账号 (role=0)</strong>: 可以管理所有用户（包括自己和子账号），查看所有操作日志</li>
                <li><strong>子账号 (role=1/3)</strong>: 只能查看和管理自己的信息，只能查看自己的操作日志</li>
            </ul>
        </div>
        
        <div class="note">
            <h3>数据加密</h3>
            <p>密码等敏感信息在传输过程中使用RSA非对称加密，确保数据安全。如果RSA加密失败，系统会自动降级为AES加密或Base64编码作为备用方案。</p>
        </div>
        
        <div class="note">
            <h3>安全建议</h3>
            <ul>
                <li>所有API请求均应使用HTTPS协议，确保传输加密</li>
                <li>客户端应妥善保管JWT令牌，避免泄露</li>
                <li>定期修改密码，使用强密码策略</li>
                <li>对于<code>/api/users/subaccount</code>接口，建议修改为使用加密方式传输密码</li>
            </ul>
        </div>
    </div>

    <div class="api-group">
        <h2 id="appendix">7. 附录 (Appendix)</h2>
        
        <h3>角色类型</h3>
        <table>
            <tr>
                <th>角色值</th>
                <th>角色名称</th>
                <th>描述</th>
            </tr>
            <tr>
                <td>0</td>
                <td>主账号</td>
                <td>系统管理员，可管理子账号</td>
            </tr>
            <tr>
                <td>1</td>
                <td>子账号</td>
                <td>普通用户，受主账号管理</td>
            </tr>
            <tr>
                <td>3</td>
                <td>编辑角色</td>
                <td>具有编辑权限的子账号</td>
            </tr>
        </table>
        
        <h3>用户状态</h3>
        <table>
            <tr>
                <th>状态值</th>
                <th>状态名称</th>
                <th>描述</th>
            </tr>
            <tr>
                <td>0</td>
                <td>禁用</td>
                <td>用户账号被禁用，无法登录</td>
            </tr>
            <tr>
                <td>1</td>
                <td>启用</td>
                <td>用户账号正常，可正常登录和使用</td>
            </tr>
        </table>
        
        <h3>常见错误码</h3>
        <table>
            <tr>
                <th>错误码</th>
                <th>描述</th>
                <th>可能的解决方案</th>
            </tr>
            <tr>
                <td>400</td>
                <td>请求参数错误或业务逻辑错误</td>
                <td>检查请求参数是否正确，查看错误信息</td>
            </tr>
            <tr>
                <td>401</td>
                <td>未授权，需要登录</td>
                <td>先进行登录，获取有效的JWT令牌</td>
            </tr>
            <tr>
                <td>403</td>
                <td>权限不足</td>
                <td>确认当前用户角色是否有足够权限执行该操作</td>
            </tr>
            <tr>
                <td>404</td>
                <td>资源不存在</td>
                <td>检查请求的资源ID是否正确</td>
            </tr>
            <tr>
                <td>500</td>
                <td>服务器内部错误</td>
                <td>联系系统管理员或查看服务器日志</td>
            </tr>
        </table>
    </div>
</body>
</html>